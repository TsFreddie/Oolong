var T=Object.defineProperty;var E=(n,t)=>{for(var e in t)T(n,e,{get:t[e],enumerable:!0})};var y={};E(y,{FromCSharpByteArray:()=>C,HttpRequest:()=>c,MithrilTick:()=>N,ToCSharpByteArray:()=>x,UnimlementedURLSearchParams:()=>g,UnimplementedFormData:()=>d,UnityDocument:()=>u,UnityElement:()=>l,UnityFragment:()=>o,UnityHistory:()=>p,UnityLocation:()=>h,UnityNode:()=>a,UnityTextNode:()=>s,UnityWindow:()=>b,addEventListener:()=>H,document:()=>F,history:()=>O,location:()=>w,requestAnimationFrame:()=>A,window:()=>r});var c=class n{static{this.baseURL=null}constructor(){this.request=new CS.UnityEngine.Networking.UnityWebRequest}abort(){this.request.Abort()}setRequestHeader(t,e){this.request.SetRequestHeader(t,e)}open(t,e,i){this.request.method=t,e.startsWith("/")?this.request.url=n.baseURL+e:this.request.url=e}send(t){t!=null&&(typeof t!="string"?this.request.uploadHandler=new CS.UnityEngine.Networking.UploadHandlerRaw(x(t)):CS.TSF.Oolong.UGUI.UnityWebRequestExtension.SetBody(this.request,t)),this.withCredentials&&CS.TSF.Oolong.UGUI.OolongWebConfig.Authenticate(this.request),CS.TSF.Oolong.UGUI.UnityWebRequestExtension.SendWithCallback(this.request,()=>{this.onreadystatechange&&this.onreadystatechange({target:this})})}get response(){return this.responseType=="json"?JSON.parse(this.request.downloadHandler.text):this.responseType=="arraybuffer"?C(this.request.downloadHandler.data):this.request.downloadHandler.text}get readyState(){return this.request.isDone?4:3}get status(){return this.request.responseCode}get statusText(){return this.request.error}set timeout(t){this.request.timeout=Math.ceil(t/1e3)}},x=n=>{let t=CS.System.Array.CreateInstance(puerts.$typeof(CS.System.Byte),n.length);for(let e=0;e<n.length;e++)t.set_Item(e,n[e]);return t},C=n=>{if(n==null)return null;let t=n.Length;if(t==0)return null;let e=new Uint8Array(t);for(let i=0;i<t;i++)e[i]=n.get_Item(i);return e},I=n=>n.replace(/</g,"<\u200B").replace(/>/g,">\u200B").replace(/\[/g,"<").replace(/\]/g,">").replace(/&lb;/g,"[").replace(/&rb;/g,"]"),m=n=>n.filter(e=>e instanceof s).map(e=>e.nodeText).join(""),U=n=>{if(n!=null)return n instanceof s?`[${n.nodeText}]`:n.id!=null?`<${n.tag} id=${n.id}/>`:`<${n.tag}/>`},a=class{constructor(){this.children=[]}get childNodes(){return this.children}elementIndex(t){let e=0;for(let i=0;i<this.children.length;i++){let v=this.children[i];if(v===t)return{nodes:i,elements:e};v instanceof l&&e++}return null}setText(t){if(this.children.length>0){console.warn("\u8BBE\u7F6E\u6587\u672C\u65F6\uFF0C\u5143\u7D20\u4E2D\u5DF2\u7ECF\u6709\u5143\u7D20\u4E86");return}if(this.children.splice(0,this.children.length),t.length!==0){var e=new s(t);e.parent=this,this.children.push(e),this.setAttribute("#",I(t))}}get parentElement(){return this.parent}get parentNode(){return this.parent}get innerHTML(){return m(this.children)}set innerHTML(t){this.setText(t)}get textContent(){return m(this.children)}set textContent(t){this.setText(t)}get firstChild(){return this.children[0]}get lastChild(){return this.children[this.children.length-1]}updateText(){this.setAttribute("#",m(this.children))}appendChild(t){if(t.parent!=null&&!(t.parent instanceof o)&&console.warn("Element\u4E2D\u51FA\u73B0\u4E86\u672A\u5904\u7406\u7684\u72B6\u51B5"),t instanceof o){for(let e=0;e<t.children.length;e++)this.appendChild(t.children[e]);t.children.splice(0,t.children.length);return}t.parent=this,this.children.push(t),t instanceof l&&this.attachChildInternal(t),t instanceof s&&this.updateText()}removeChild(t){t.parent=null;let e=this.children.indexOf(t);if(e<0){console.warn("\u627E\u4E0D\u5230\u6B63\u5728\u79FB\u9664\u7684\u5143\u7D20\u3002\u53EF\u80FD\u662Fvnode\u4E0D\u540C\u6B65");return}this.children.splice(e,1),t instanceof l&&this.removeChildInternal(t),t instanceof s&&this.updateText()}insertBefore(t,e){t.parent!=null&&console.warn("Element\u4E2D\u51FA\u73B0\u4E86\u672A\u5904\u7406\u7684\u72B6\u51B5");let i=this.elementIndex(e);if(i==null){console.warn("\u627E\u4E0D\u5230\u63D2\u5165\u76EE\u6807\u5143\u7D20\u3002\u53EF\u80FD\u662Fvnode\u4E0D\u540C\u6B65");return}t.parent=this,this.children.splice(i.nodes,0,t),t instanceof l&&this.insertChildInternal(t,i.elements),t instanceof s&&this.updateText()}toJSON(){return{type:this instanceof o?"fragment":"element",node:U(this),parent:U(this.parent),children:this.children.map(t=>t.toJSON())}}},o=class extends a{constructor(){super(),this.tag=""}setAttribute(){}removeAttribute(){}attachChildInternal(){}removeChildInternal(){}insertChildInternal(){}},q=(n,t,e)=>{typeof e=="function"?e({target:n,type:t}):typeof e=="object"&&e.handleEvent({target:n,type:t})},l=class extends a{constructor(e){super();typeof e=="string"?this.element=CS.TSF.Oolong.UGUI.DocumentUtils.CreateElement(e):this.element=e,this.tag=this.element.TagName,this.events={}}contains(e){return!1}attachChildInternal(e){CS.TSF.Oolong.UGUI.DocumentUtils.AttachElement(this.element,e.element)}removeChildInternal(e){CS.TSF.Oolong.UGUI.DocumentUtils.RemoveElement(this.element,e.element)}insertChildInternal(e,i){CS.TSF.Oolong.UGUI.DocumentUtils.InsertElement(this.element,e.element,i)}setAttribute(e,i){e=="id"&&(this.id=i),this.element.SetElementAttribute(e,i.toString())}removeAttribute(e){e=="id"&&(this.id=void 0),this.element.SetElementAttribute(e,null)}addEventListener(e,i){this.events[e]=i,this.element.AddListener(e,()=>q(this,e,i))}removeEventListener(e,i){delete this.events[e],this.element.RemoveListener(e)}},s=class{constructor(t){this.nodeText=t}get parentElement(){return this.parent}get parentNode(){return this.parent}set nodeValue(t){this.nodeText=t,this.parent?.updateText?.()}toJSON(){return{type:"text",text:this.nodeText}}},u=class{createDocumentFragment(){return new o}createElement(t){return new l(t)}createTextNode(t){return new s(t)}},h=class{constructor(){this._hash="#";this._href="/"}get href(){return this._href}get hash(){return this._hash}set href(t){this._href=t}set hash(t){this._hash=t}},p=class{constructor(){this.historyStack=[]}pushState(t,e,i){i=i??r.location.href,this.historyStack.push({state:t,title:e,url:i}),r.location.hash=i,r.location.href=i}replaceState(t,e,i){i=i??r.location.href,this.historyStack.length>0?(this.historyStack[this.historyStack.length-1]={state:t,title:e,url:i},i&&(r.location.hash=i)):(this.historyStack.push({state:t,title:e,url:i}),i&&(r.location.hash=i)),r.location.hash=i,r.location.href=i}},d=class{},g=class{},b=class{constructor(){this.animationFrameQueue=[];this.animationFrameProcessor=[];this.location=new h;this.history=new p;this.document=new u;this.XMLHttpRequest=c;this.FormData=d;this.URLSearchParams=g;this.setTimeout=globalThis.setTimeout}requestAnimationFrame(t){typeof t=="function"&&this.animationFrameQueue.push(t)}addEventListener(t,e){}removeEventListener(t,e){}tick(){let t=this.animationFrameQueue;this.animationFrameQueue=this.animationFrameProcessor,this.animationFrameProcessor=t;for(let e of this.animationFrameProcessor)e();this.animationFrameProcessor.splice(0,this.animationFrameProcessor.length)}},r=new b,A=n=>r.requestAnimationFrame(n),F=r.document,w=r.location,O=r.history,H=(n,t)=>r.addEventListener(n,t),N=()=>{r.tick()};var S={...y};for(f in S)globalThis[f]=S[f];var f;
