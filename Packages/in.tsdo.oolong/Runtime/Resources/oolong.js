var D=Object.defineProperty;var k=(d,e)=>{for(var a in e)D(d,a,{get:e[a],enumerable:!0})};var O={};k(O,{Oolong:()=>T,ScriptBehaviour:()=>v});var n=(d,e)=>{if(e in d){var a=d[e];if(typeof a=="function")return a}return null},g=class{constructor(){this.behaviours={};this.gameObjects={};this.updates={};this.fixedUpdates={};this.lateUpdates={}}attach(e,a,o){let i=e.GetScriptInstanceID(),s=e.GetGameObjectInstanceID(),m=a.name,t=new a;t.mono=e,t.instanceId=i,t.gameObjectId=s;let w;try{w=o?JSON.parse(o):null}catch(B){console.error(`Failed to parse serialized data for ${m} with error: ${B}`);return}let r=n(t,"update"),c=n(t,"fixedUpdate"),l=n(t,"lateUpdate");r&&(r=r.bind(t)),c&&(c=c.bind(t)),l&&(l=l.bind(t));let h=n(t,"awake"),u=n(t,"start"),p=n(t,"onEnable"),b=n(t,"onDisable"),f=n(t,"onDestroy");h&&(h=h.bind(t)),u&&(u=u.bind(t)),p&&(p=p.bind(t)),b&&(b=b.bind(t)),f&&(f=f.bind(t));let y=()=>{r&&(this.updates[i]=r),c&&(this.fixedUpdates[i]=c),l&&(this.lateUpdates[i]=l)},j=()=>{delete this.updates[i],delete this.fixedUpdates[i],delete this.lateUpdates[i]},x=y,I=j;p&&(x=()=>{y(),p()}),b&&(I=()=>{j(),b()}),e.SetHooks(h,u,x,I,f),this.behaviours[i]=t,s in this.gameObjects||(this.gameObjects[s]={}),a.name in this.gameObjects[s]||(this.gameObjects[s][m]=[]),this.gameObjects[s][m].push(i)}detach(e){let a=this.behaviours[e],o=a.gameObjectId;delete this.behaviours[e];let i=a.constructor.name,s=this.gameObjects[o][i].indexOf(e);this.gameObjects[o][i].splice(s,1),this.gameObjects[o][i].length==0&&delete this.gameObjects[o][i],delete this.updates[e],delete this.fixedUpdates[e],delete this.lateUpdates[e]}update(){for(let e in this.updates)this.updates[e]()}fixedUpdate(){for(let e in this.fixedUpdates)this.fixedUpdates[e]()}lateUpdate(){for(let e in this.lateUpdates)this.lateUpdates[e]()}dispose(){for(let e in this.behaviours)this.behaviours[e].mono.ClearHooks()}},v=class{},T=new g;var S={...O};for(U in S)globalThis[U]=S[U];var U;
